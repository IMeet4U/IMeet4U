<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IMEET4U - 全站 SPA</title>
  <style>
    /* CSS 變數 & Reset */
    :root {
      --color-primary: #FF6B6B;
      --color-secondary: #4ECDC4;
      --color-bg: #f7f7f7;
      --color-text: #333;
      --color-light: #fff;
      --color-muted: #666;
      --radius: 8px;
    }
    [data-theme="dark"] {
      --color-bg: #222;
      --color-text: #ddd;
      --color-light: #333;
      --color-muted: #aaa;
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    html{font-size:16px;}
    body{font-family:'PingFang TC','Noto Sans TC',sans-serif;color:var(--color-text);background:var(--color-bg);}
    a, button{font-family:'PingFang TC','Noto Sans TC',sans-serif;text-decoration:none;color:inherit;background:none;border:none;cursor:pointer;}
    img{max-width:100%;height:auto;display:block;}

    /* Header */
    header{background:var(--color-light);padding:1rem 2rem;display:flex;align-items:center;justify-content:space-between;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
    .logo{font-size:1.5rem;font-weight:bold;color:var(--color-primary);}
    nav{display:flex;align-items:center;}
    nav a, nav button{margin-left:1rem;font-weight:500;color:var(--color-primary);}
    .btn-primary{padding:.75rem 1.5rem;background:var(--color-primary);color:var(--color-light);border-radius:var(--radius);}
    #auth-area{display:flex;align-items:center;position:relative;}
    #user-menu{position:absolute;top:2.5rem;right:0;background:var(--color-light);border:1px solid #ccc;border-radius:4px;display:none;box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    #user-menu button{width:100%;padding:.5rem 1rem;text-align:left;}

    /* SPA Pages + Transitions */
    .page{display:none;padding:2rem;opacity:0;transition:opacity .3s;}
    .page.active{display:block;opacity:1;}

    /* Hero */
    .hero{text-align:center;padding:4rem 2rem;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-secondary) 100%);color:var(--color-light);}
    .hero h1{font-size:2.5rem;line-height:1.2;margin-bottom:1rem;}
    .hero p{margin-bottom:2rem;font-size:1.125rem;}

    /* Features */
    .features{padding:3rem 2rem;background:var(--color-light);display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));}
    .feature-card{background:var(--color-light);padding:1.5rem;border-radius:var(--radius);box-shadow:0 1px 3px rgba(0,0,0,0.1);text-align:center;transition:transform .2s;}
    .feature-card:hover{transform:translateY(-5px);}
    .feature-card h3{margin:1rem 0 .5rem;font-size:1.25rem;color:var(--color-primary);}
    .feature-card p{font-size:1rem;color:var(--color-muted);}

    /* About */
    #about p{max-width:600px;margin:1rem auto;line-height:1.6;}

    /* Match */
    #match .card{background:var(--color-light);padding:2rem;margin-bottom:1rem;text-align:center;border-radius:var(--radius);box-shadow:0 1px 3px rgba(0,0,0,0.1);touch-action:pan-y;user-select:none;}
    #match .controls{text-align:center;margin-top:1rem;}
    #match .controls button{font-size:1.5rem;margin:0 .5rem;}

    /* Chat */
    #chat #chat-window{background:var(--color-light);border:1px solid #ccc;border-radius:4px;height:300px;overflow-y:auto;padding:1rem;}
    #chat .input-group{display:flex;margin-top:1rem;max-width:400px;}
    #chat input{flex:1;padding:.5rem;border:1px solid #ccc;border-radius:4px 0 0 4px;}
    #chat button{padding:.5rem 1rem;border:1px solid #ccc;border-left:none;border-radius:0 4px 4px 0;}

    /* Forms */
    .form-container{max-width:400px;margin:3rem auto;background:var(--color-light);padding:2rem;border-radius:var(--radius);box-shadow:0 1px 3px rgba(0,0,0,0.1);}
    .form-container h2{margin-bottom:1rem;}
    .form-container label{display:block;margin-bottom:1rem;}
    .form-container input,.form-container select,.form-container textarea{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px;}
    .form-container button{width:100%;padding:.75rem;background:var(--color-primary);color:var(--color-light);border-radius:var(--radius);}

    /* Modal */
    .modal-backdrop{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;}
    .modal-backdrop.active{display:flex;}
    .modal{background:var(--color-light);padding:2rem;border-radius:var(--radius);max-width:500px;width:90%;max-height:90%;overflow:auto;}

    /* Calendar */
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;}
    .calendar .header{font-weight:bold;color:var(--color-primary);}
    .calendar div{padding:.5rem;text-align:center;border-radius:4px;background:var(--color-light);}

    /* Footer */
    footer{text-align:center;padding:2rem 0;}

    @media(max-width:768px){header{padding:1rem;}nav a,nav button{margin-left:.75rem;font-size:.9rem;} .hero h1{font-size:2rem;} .hero p{font-size:1rem;} .features{padding:2rem 1rem;}}
  </style>
</head>
<body data-theme="light">

  <header>
    <div class="logo">IMEET4U</div>
    <nav>
      <a data-target="home">首頁</a>
      <a data-target="about">關於我們</a>
      <a data-target="match">配對系統</a>
      <a data-target="chat">即時聊天</a>
      <a data-target="profile">個人檔案</a>
      <a data-target="settings">喜好設定</a>
      <a data-target="calendar">活動日曆</a>
      <button id="q-btn">問卷</button>
      <button id="dark-toggle">🌙</button>
      <div id="auth-area">
        <a data-target="login">登入</a>
        <a data-target="register" class="btn-primary">註冊</a>
      </div>
      <div id="user-menu"></div>
    </nav>
  </header>

  <main>
    <!-- Home -->
    <section id="home" class="page active">
      <div class="hero">
        <h1>Discover<br>Meaningful<br>Connections</h1>
        <p>加入 IMEET4U，開始你的浪漫旅程</p>
        <a class="btn-primary" data-target="register">立即加入</a>
      </div>
      <div class="features">
        <div class="feature-card" data-target="match"><img src="icons/match.svg" alt=""><h3>配對系統</h3><p>滑動卡片，快速找到理想對象</p></div>
        <div class="feature-card" data-target="chat"><img src="icons/chat.svg" alt=""><h3>即時聊天</h3><p>一對一聊天，感受真實互動</p></div>
        <div class="feature-card" data-target="profile"><img src="icons/profile.svg" alt=""><h3>個人檔案</h3><p>展示最真實的自己</p></div>
        <div class="feature-card" data-target="settings"><img src="icons/settings.svg" alt=""><h3>喜好設定</h3><p>自訂篩選條件，優化配對結果</p></div>
      </div>
    </section>

    <!-- About -->
    <section id="about" class="page"><h2>關於我們</h2><p>IMEET4U 是專為現代單身族群設計的交友軟體…</p></section>

    <!-- Match -->
    <section id="match" class="page"><h2>配對系統</h2><div id="swipe-container"><div class="card">使用者 A</div><div class="card">使用者 B</div><div class="card">使用者 C</div></div><div class="controls"><button id="dislike">👎</button><button id="like">👍</button></div></section>

    <!-- Chat -->
    <section id="chat" class="page"><h2>即時聊天</h2><div id="chat-window"></div><div class="input-group"><input id="msg" placeholder="輸入訊息…"><button id="send">傳送</button></div></section>

    <!-- Profile -->
    <section id="profile" class="page"><h2>我的檔案</h2><form class="form-container" id="profile-form"><label>名字：<input name="name" required></label><label>自我介紹：<textarea name="bio" required></textarea></label><button type="submit">儲存</button></form></section>

    <!-- Settings -->
    <section id="settings" class="page"><h2>篩選喜好</h2><form class="form-container" id="settings-form"><label>性別偏好：<select name="gender"><option>不限</option><option>女性</option><option>男性</option></select></label><label>年齡範圍：<input type="number" name="ageMin" placeholder="最小"> – <input type="number" name="ageMax" placeholder="最大"></label><button type="submit">儲存設定</button></form></section>

    <!-- Calendar -->
    <section id="calendar" class="page"><h2>活動日曆</h2><div class="calendar" id="calendar-grid"></div></section>

    <!-- Login -->
    <section id="login" class="page"><div class="form-container"><h2>登入</h2><form id="login-form"><label>帳號或 Email：<input name="username" required></label><label>密碼：<input type="password" name="password" required></label><button type="submit">登入</button></form></div></section>

    <!-- Register -->
    <section id="register" class="page"><div class="form-container"><h2>註冊</h2><form id="register-form"><label>帳號：<input name="username" required></label><label>Email：<input type="email" name="email" required></label><label>密碼：<input type="password" name="password" required minlength="6"></label><label>確認密碼：<input type="password" name="confirm_password" required></label><button type="submit">註冊</button></form></div></section>
  </main>

  <footer>&copy; 2025 IMEET4U. All Rights Reserved.</footer>

  <!-- Questionnaire Modal -->
  <div class="modal-backdrop" id="q-modal">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="q-title">
      <h3 id="q-title">性格問卷</h3>
      <form id="q-form">
        <label>你喜歡戶外活動嗎？<select name="outdoor"><option value="yes">是</option><option value="no">否</option></select></label>
        <label>你偏好哪種類型聚會？<select name="theme"><option value="sports">運動</option><option value="entertainment">娛樂</option></select></label>
        <button type="submit">儲存問卷</button>
        <button type="button" id="q-close">關閉</button>
      </form>
    </div>
  </div>

  <script>
    // 深色模式切換
    const saved = localStorage.getItem('theme')||'light';
    document.body.setAttribute('data-theme', saved);
    document.getElementById('dark-toggle').onclick = () => {
      const cur = document.body.getAttribute('data-theme');
      const nxt = cur==='light'?'dark':'light';
      document.body.setAttribute('data-theme', nxt);
      localStorage.setItem('theme', nxt);
    };

    // SPA 路由 (使用事件委派支援動態 auth links)
    function showPage(id){
      document.querySelectorAll('.page').forEach(p=>p.classList.toggle('active', p.id===id));
    }
    document.body.addEventListener('click', e=>{
      const tgt = e.target.closest('[data-target]');
      if(tgt){
        location.hash = tgt.dataset.target;
      }
    });
    window.addEventListener('hashchange', ()=>showPage(location.hash.slice(1)));
    if(location.hash) showPage(location.hash.slice(1)); else location.hash='home';

    // 問卷 Modal
    const qModal = document.getElementById('q-modal');
    document.getElementById('q-btn').onclick = ()=> qModal.classList.add('active');
    document.getElementById('q-close').onclick = ()=> qModal.classList.remove('active');
    document.getElementById('q-form').onsubmit = e=>{
      e.preventDefault();
      localStorage.setItem('questionnaire', JSON.stringify(Object.fromEntries(new FormData(e.target))));
      alert('問卷已儲存'); qModal.classList.remove('active');
    };

    // Auth Area
    const authArea = document.getElementById('auth-area'), userMenu = document.getElementById('user-menu');
    function renderAuth(){
      const user = localStorage.getItem('username');
      if(user){
        authArea.innerHTML = `<button id="user-btn">${user}</button>`;
        userMenu.innerHTML = `<button id="logout-btn">登出</button>`;
        document.getElementById('user-btn').onclick = ()=>{
          userMenu.style.display = userMenu.style.display==='block'?'none':'block';
        };
        document.getElementById('logout-btn').onclick = ()=>{
          localStorage.removeItem('username'); userMenu.style.display='none'; renderAuth(); location.hash='home';
        };
      } else {
        authArea.innerHTML = `<a data-target="login">登入</a><a data-target="register" class="btn-primary">註冊</a>`;
      }
    }
    renderAuth();

    // Login/Register Simulation
    document.getElementById('login-form').onsubmit = e=>{
      e.preventDefault(); const u=e.target.username.value.trim(); if(u){localStorage.setItem('username',u);renderAuth();location.hash='home';}
    };
    document.getElementById('register-form').onsubmit = e=>{
      e.preventDefault(); const fm=e.target; if(fm.password.value===fm.confirm_password.value){localStorage.setItem('username',fm.username.value.trim());renderAuth();location.hash='home';} else alert('密碼不一致');
    };

    // Calendar
    const cal = document.getElementById('calendar-grid');
    const today = new Date(), Y=today.getFullYear(), M=today.getMonth();
    const first= new Date(Y,M,1).getDay(), days=new Date(Y,M+1,0).getDate();
    ['日','一','二','三','四','五','六'].forEach(w=>{const d=document.createElement('div');d.textContent=w;d.className='header';cal.append(d);});
    for(let i=0;i<first;i++) cal.append(document.createElement('div'));
    for(let d=1;d<=days;d++){const c=document.createElement('div');c.textContent=d;cal.append(c);}

    // Match drag/swipe & chat & forms omitted (same as before)
  </script>
</body>
</html>
